
"use strict"




var log          = require('engram/logging/logger')
var loadDatabase = require('engram/persistance/load-database')
var createTables = require('engram/persistance/create-tables')





var setupDatabase = (dbpath, callback) => {

	loadDatabase(dbpath, database => {

		createTables(database, errors => {

			if (errors.length > 0) {

				log.global.error({errors}, 'failed to create tables.')
				process.exit(1)

			} else {

				log.global.info({ }, 'successfully created tables.')
				callback(database)

			}

		})

	})

}




module.exports = setupDatabase
