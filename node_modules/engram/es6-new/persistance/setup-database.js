
"use strict"




var log          = require('engram/es6-new/logging/logger')
var loadDatabase = require('engram/es6-new/persistance/load-database')
var createTables = require('engram/es6-new/persistance/create-tables')





var setupDatabase = (dbpath, callback) => {

	loadDatabase(dbpath, database => {

		createTables(database, createResult => {

			createResult.onErr(err => {

				log.global.error(err, 'failed to create tables.')
				callback(database)

			})

			createResult.onOk(( ) => {

				log.global.info({ }, 'successfully created tables.')
				callback(database)

			})

		})

	})

}




module.exports = setupDatabase
