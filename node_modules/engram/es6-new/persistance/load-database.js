
"use strict"





var constants = require('engram/es6-new/commons/constants')
var path      = require('path')
var sqlite3   = require('sqlite3')





var loadDatabase = (dbPath, callback) => {

	if (!dbPath) dbPath = 'data/engram.db' // TODO horrid hack remove.

	var fullPath = dbPath === constants.database.MEMORY
		? dbPath
		: path.join(process.cwd( ), dbPath)

	var dbconn = new sqlite3.Database(fullPath, err => {

		// TODO add fatal exiter here.

		callback(dbconn)

	})

}




module.exports = loadDatabase
