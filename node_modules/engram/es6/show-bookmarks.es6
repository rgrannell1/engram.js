#!/usr/bin/env node

"use strict"





var log = require('engram/logger')

try {

	var Result        = require('engram/result').Result
	var Ok            = require('engram/result').Ok
	var Err           = require('engram/result').Err

	var extractTitle  = require('engram/extract-title')
	var createArchive = require('engram/create-archive')
	var log           = require('engram/logger')
	var database      = require('engram/database')

	var request       = require('request')
	var pages         = require('engram/pages')

	var publicFiles   = require('engram/public-files')

} catch (err) {

	log.fatal({
		message: err.message,
		stacK:   err.stack,
	}, 'failed to load dependencies.')

	process.exit( )

}





{
	var dependencies = { }

	dependencies['javascript-head']   = publicFiles.loadJS([ ])
	dependencies['javascript-bottom'] = publicFiles.loadJS([

		'lib-jquery',
		'lib-mustache',
		'lib-is',
		'lib-require',

		'pubsub',
		'engram',
		'cache',
		'listeners',
		'update-query',
		'update-time',
		'sync-bookmarks',
		'delete-bookmark',
		'draw-bookmarks',
		'search',
		'main'

	])

	dependencies['css'] = publicFiles.loadCSS([
		'style'
	])


}





module.exports = ( ) => {

	return pages.index(dependencies)

}
