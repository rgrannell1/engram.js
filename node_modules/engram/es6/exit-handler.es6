#!/usr/bin/env node

"use strict"





var log      = require('engram/logger')
var database = require('engram/database')





var exitHandler = (shouldExit, err) => {

	if (err) {

		log.fatal({
			message: err.message,
			stack:   err.stack
		}, `uncaught exception`)

	}


	if (shouldExit) {

		try {

			database.close( )

		} catch (err) {

			log.error({
				message: err.message,
				stack:   err.stack
			}, `failed to close database connection.`)

		}

		process.exit( )
	}

}




module.exports = exitHandler
