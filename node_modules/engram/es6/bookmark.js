#!/usr/bin/env node

"use strict"





var log    = require('engram/es5/logger')
var is     = require('is')

var Result = require('engram/es5/result').Result
var Ok     = require('engram/es5/result').Ok
var Err    = require('engram/es5/result').Err

var URL    = require('url')





var getID = bookmark => {

	is.always.object(bookmark)

	if (bookmark.hasOwnProperty('bookmarkId')) {
		return bookmark.bookmarkId
	} else {
		var erroneous = JSON.stringify(bookmark)
		throw Error(`no key "bookmarkId" in bookmark object; ${erroneous}`)
	}

}




var bookmark = row => {

	var parsed = URL.parse(row.url)

	row.hostname = parsed.hostname

	parsed.search   = null
	parsed.hash     = null
	parsed.query    = null
	parsed.pathname = null
	parsed.path     = null

	row.hosturl  = URL.format(parsed)

	return Ok(row)

}



module.exports = {
	getID,
	bookmark
}
