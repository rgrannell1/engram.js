#!/usr/bin/env node

"use strict"





var log = require('engram/logger')
var is  = require('is')

var Result = require('engram/result').Result
var Ok     = require('engram/result').Ok
var Err    = require('engram/result').Err

var URL    = require('url')





var getID = bookmark => {

	is.always.object(bookmark)

	if (bookmark.hasOwnProperty('bookmark_id')) {
		return bookmark.bookmark_id
	} else {
		var erroneous = JSON.stringify(bookmark)
		throw Error(`no key "bookmark_id" in bookmark object; ${erroneous}`)
	}

}




var bookmark = row => {

	var parsed = URL.parse(row.url)

	row.hostname = parsed.hostname
	row.hosturl  = URL.format(parsed)

	return Ok(row)

}



module.exports = {
	getID,
	bookmark
}
