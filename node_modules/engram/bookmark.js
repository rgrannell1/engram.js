#!/usr/bin/env node
"use strict";

var log = require("engram/logger");
var is = require("is");

var Result = require("engram/result").Result;
var Ok = require("engram/result").Ok;
var Err = require("engram/result").Err;

var URL = require("url");

var getID = function (bookmark) {

	is.always.object(bookmark);

	if (bookmark.hasOwnProperty("bookmarkId")) {
		return bookmark.bookmarkId;
	} else {
		var erroneous = JSON.stringify(bookmark);
		throw Error("no key \"bookmarkId\" in bookmark object; " + erroneous);
	}
};

var bookmark = function (row) {

	var parsed = URL.parse(row.url);

	row.hostname = parsed.hostname;
	row.hosturl = URL.format(parsed);

	return Ok(row);
};

module.exports = {
	getID: getID,
	bookmark: bookmark
};