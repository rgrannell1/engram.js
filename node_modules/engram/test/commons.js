
"use strict"





var constants = require('./constants')





var commons = { }

commons.defaultArgs = obj => {

	return {
		'--port':     obj.port     || '5000',
		'--dbpath':   obj.dbpath   || 'data/engram.db',
		'--keypath':  obj.keypath  || 'certs/key.pem',
		'--certpath': obj.certpath || 'certs/cert.pem',
		'--logs':     obj.logs     || false,
		'--database': obj.database || false,
		run:          obj.run      || true,
		certs:        obj.certs    || false,
		wipe:         obj.wipe     || false,
	}

}

var port = 2000

commons.freePortNumber = ( ) => {
	port += 10
	return port + ''
}

commons.listRoutes = app => {

	var routes = [ ]

	app._router.stack.map(layer => {

		if (layer.route && layer.route.path) {
			routes.push(layer.route.path)
		}

		if (layer.handle && layer.handle.stack) {

			layer.handle.stack.map(innerLayer => {
				routes.push(innerLayer.route.path)
			})

		}

	})

	return routes.filter(route => {
		return typeof route !== 'undefined'
	})

}





module.exports = commons
