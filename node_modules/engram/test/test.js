
"use strict"




var fs        = require('fs')
var chai      = require('chai')

var constants = require('./constants')
var commons   = require('./commons')
var server    = require('../app/start-server')
var mocha     = require('mocha')









describe('- supporting features', ( ) => {

	var testApps

	before(done => {

		server(commons.defaultArgs({

			certpath: commons.TEST_CERTPATH,
			keypath:  commons.TEST_KEYPATH,
			certs:    true

		}), apps => {
			testApps = apps
			done( )
		})

	})

	describe('certs', ( ) => {
		it('generates certificates when asked', done => {

			var certExists = fs.lstatSync(commons.TEST_CERTPATH).isFile( )
			var keyExists  = fs.lstatSync(commons.TEST_KEYPATH).isFile( )

			expect(certExists).to.equal(true)
			expect(keyExists) .to.equal(true)

			done( )

		})
	})

})
