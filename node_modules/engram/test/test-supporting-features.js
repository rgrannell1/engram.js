
"use strict"




var fs        = require('fs')
var assert    = require('assert')

var constants = require('./constants')
var commons   = require('./commons')
var server    = require('../app/start-server')
var mocha     = require('mocha')









describe('- supporting features', ( ) => {

	var testApps

	before(done => {

		server(commons.defaultArgs({

			'--certpath': commons.TEST_CERTPATH,
			'--keypath':  commons.TEST_KEYPATH,
			certs:    true

		}), apps => {
			testApps = apps
			done( )
		})

	})

	describe('certs', ( ) => {
		it('generates certificates when asked', done => {

			var certExists = fs.lstatSync(commons.TEST_CERTPATH).isFile( )
			var keyExists  = fs.lstatSync(commons.TEST_KEYPATH).isFile( )

			assert(keyExists,  'key did not exist')
			assert(certExists, 'cert did not exist')

			done( )

		})
	})

})
