
"use strict"



var express   = require('express')
var constants = require('./constants')
var commons   = require('./commons')
var server    = require('../app/start-server')
var mocha     = require('mocha')

var expect    = require('chai').expect




describe('- routes', function ( ) {

	var testApps
	var testServers
	this.timeout(10000)

	before(done => {

		server(commons.defaultArgs({
			port: commons.freePortNumber( )
		}), (apps, servers) => {

			testApps    = apps
			testServers = servers

			done( )
		})

	})

	it('has a spec for each protocol', ( ) => {

		Object.keys(testApps).forEach(protocol => {
			expect(testApps[protocol].specs).to.be.an('object')
		})

	})

	after(done => {

		testServers.https.close(done)

	})

})
